<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>推奨ロジック マップエディタ (v3)</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> <!-- Bootstrap for grid system -->
    <style>
        :root {
            --color-bg: #111827; /* bg-gray-900 */
            --color-bg-card: #1f2937; /* bg-gray-800 */
            --color-border: #374151; /* border-gray-700 */
            --color-text-primary: #d1d5db; /* text-gray-300 */
            --color-text-secondary: #9ca3af; /* text-gray-400 */
            --color-input-bg: #374151; /* bg-gray-700 */
            --color-accent: #3b82f6; /* blue-500 */
            --color-danger: #ef4444; /* red-500 */
        }
        body { background-color: var(--color-bg); color: var(--color-text-primary); padding: 2rem; }
        h1, h2 { color: white; }
        .card-custom {
            background-color: var(--color-bg-card);
            border: 1px solid var(--color-border);
            border-radius: 0.75rem; /* rounded-xl */
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .card-header-custom { padding: 1rem 1.5rem; border-bottom: 1px solid var(--color-border); }
        .card-body-custom { padding: 1.5rem; }
        .form-control, .custom-select {
            background-color: var(--color-input-bg);
            color: var(--color-text-primary);
            border-color: var(--color-border);
        }
        .form-control:focus, .custom-select:focus { background-color: var(--color-input-bg); color: white; border-color: var(--color-accent); box-shadow: none; }
        label { color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem; }
        .btn-primary { background-color: var(--color-accent); border-color: var(--color-accent); }
        .btn-danger-soft { color: var(--color-danger); background-color: transparent; border: none; font-size: 0.875rem; }
        .btn-danger-soft:hover { color: white; }
        .toggle-btn-group button { border: 1px solid var(--color-border); padding: 0.5rem 1rem; }
        .toggle-btn-active { background-color: var(--color-accent); color: white; }
        .toggle-btn-inactive { background-color: var(--color-input-bg); color: var(--color-text-secondary); }
        textarea { font-family: monospace; white-space: pre; overflow-wrap: normal; overflow-x: scroll; }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>推奨ロジック マップエディタ (v3)</h1>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="mapSelector"><strong>1. 編集するマップを選択</strong></label>
                    <select class="custom-select" id="mapSelector">
                        <option value="GIMMICK_COUNTER_MAP">GIMMICK_COUNTER_MAP (ギミック → 対策)</option>
                        <option value="WEAKNESS_ATTACK_MAP">WEAKNESS_ATTACK_MAP (弱点 → 攻撃)</option>
                        <option value="THREAT_SUPPORT_MAP">THREAT_SUPPORT_MAP (ギミック → サポート)</option>
                        <option value="WEAKNESS_TO_GIMMICK_MAP">WEAKNESS_TO_GIMMICK_MAP (偽の弱点 → 真のギミック)</option>
                        <option value="GIMMICK_REASON_TEMPLATES">GIMMICK_REASON_TEMPLATES (推奨理由テンプレート)</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                 <div class="form-group">
                    <label><strong>2. 既存のJSオブジェクトを貼り付け</strong></label>
                    <div class="input-group">
                        <textarea id="input-area" class="form-control" rows="3" placeholder="例: const GIMMICK_COUNTER_MAP = { ... };"></textarea>
                        <div class="input-group-append">
                            <button id="load-btn" class="btn btn-success">読み込み</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="my-4 border-secondary">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 id="editor-title" class="h4">3. エディタ</h2>
            <button id="add-entry-btn" class="btn btn-primary">新しいトリガーを追加</button>
        </div>
        <div id="editor-container">
            <!-- 動的にコンテンツが生成される -->
        </div>

        <hr class="my-4 border-secondary">

        <div>
            <h2>4. JavaScriptオブジェクト出力</h2>
            <p>編集内容がここにJavaScriptオブジェクトとして出力されます。下の「コピー」ボタンを押し、<code>RecommendationLogic.js</code> に貼り付けてください。</p>
            <textarea id="output" class="form-control" rows="20"></textarea>
            <button id="copy-btn" class="btn btn-info mt-2">クリップボードにコピー</button>
        </div>
    </div>

    <script src="js/map_editor_v3.js"></script>

</body>
</html>
